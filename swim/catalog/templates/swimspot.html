{% extends "base_generic.html" %}

{% block content %}

  <div class="container">
    {% for i in swims %}
<h4>{{i.1}}</h4>
<p>{{i.2}}</p>
<br><b>Toilets:</b> {% if i.3 %} Yes {% else %} No {% endif %}
<br><b>Cafe:</b> {% if i.4%} Yes {% else %} No {% endif %}
<br><b>Bathing Quality:</b> {{i.5}}<br><br>
<br><b>Suitable for long distance training:</b> {{i.6}}<br><br>
<p style="color: rgb(195, 195, 211); font-size: 12px;">
Water quality data provided by the Environment Agency.  Licensed under the Open Government Licence v3.0</p>
<div class="row pb-5">
  <div class="col-md-8">

    {% for i in photo %}
     {% for j in i %}
     

    <img src="../../{{j}}" alt="" height="70%" width="60%" />
  </div>

  <div class="col-md-4">
    {% endfor %}
    {% endfor %}
 
    <a href="{% url 'addphoto' i.0 %}"><b>Upload a photo of this swimspot</b></a>
{% if user.is_authenticated %}<br><br><i class="fa-solid fa-heart-circle-plus"></i><p style="color:coral"><a href="{% url 'save_swim' i.0 %}">Save this swim</a> </p><br><br>

<br><h3><b>Have you been swimming here? What did you think? </b></h3>
<form method="POST" action="{% url 'comment' i.0 %}">
    {% csrf_token %}
    <textarea class="form-control" rows="3" name="comment" placeholder="Write your comment here..." required></textarea>
    <button type="submit">Submit</button>
   
  </form>
  <br><br>
  {% endif %}
  <div style="padding-bottom: 150px;">
  
    {% for comment in commentos %}

    <li class="comment" style="list-style-type:none;"><h3><a href="{% url 'profile' comment.user.id %}">{{comment.user.username}}</a></h3> posted this comment on {{comment.date_added}}:<br>{{ comment.comment }} </a> </li><br><br>
  
    {% endfor %}
    {% endfor %}
  </div>

  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link href="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.8.2/mapbox-gl.js"></script>
<style>
body { margin: 0; padding: 0; }
#map { position: absolute; top: 0; bottom: 150px; right:-100px; height: 50%; width: 50%; }
</style>

<div id="map"></div>
 
<script>
  let swimLocation = JSON.parse("{{ locations|escapejs }}"); 
    let lng = swimLocation[0].longitude;
      let lt =  swimLocation[0].latitude; 
        let lat = parseFloat(lt);
          let long = parseFloat(lng);
mapboxgl.accessToken = 'pk.eyJ1IjoiZW1tYWRhdmlkcyIsImEiOiJjbDJlcW1sOWIwMGdhM2VyenAwZmtobTV6In0.xN9yyL4whJVANZa1Vmxr1A';
const map = new mapboxgl.Map({
container: 'map',
style: 'mapbox://styles/mapbox/streets-v11',
center: [long, lat],
zoom: 8
});

// Create a default Marker and add it to the map.
const marker1 = new mapboxgl.Marker()
.setLngLat([long, lat])
.addTo(map);
 
</script>
  
  
      

{% endblock %}